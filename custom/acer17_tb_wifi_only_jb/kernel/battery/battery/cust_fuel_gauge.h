#include <mach/mt_typedefs.h>

#define FGAUGE_VOLTAGE_FACTOR           2.44 // mV
#define FGAUGE_CURRENT_FACTOR           6.25 // uV/Rsns
#define FGAUGE_CURRENT_OFFSET_FACTOR    1.56 // uV/Rsns
#define FGAUGE_CAR_FACTOR               6.25 // uV/Rsns
#define FGAUGE_RSNS_FACTOR              0.02 // Ohm

//#define COMPASATE_OCV                   80 // mV for evb
#define COMPASATE_OCV                   40 // mV for phone

#define BATTERY_VOLTAGE_MINIMUM         3400
#define BATTERY_VOLTAGE_MAXIMUM         4200

//#define BATTERY_CAPACITY_MAXIMUM        3600
#define BATTERY_CAPACITY_MAXIMUM        2799

#define TEMPERATURE_T0                  110
#define TEMPERATURE_T1                  0
#define TEMPERATURE_T2                  25
#define TEMPERATURE_T3                  50
#define TEMPERATURE_T                   255 // This should be fixed, never change the value

//#define BATT_CAPACITY                   1280
//#define BATT_CAPACITY                   3602
#define BATT_CAPACITY                   2790

#define ENABLE_SW_COULOMB_COUNTER       0 // 1 is enable, 0 is disable
//#define ENABLE_SW_COULOMB_COUNTER       1 // 1 is enable, 0 is disable

//#define FG_CURRENT_OFFSET_DISCHARGING 	31
#define FG_CURRENT_OFFSET_DISCHARGING 	0

#define FG_RESISTANCE 	20

#define FG_METER_RESISTANCE 	0
//#define FG_METER_RESISTANCE 	540 // current meter

//#define MAX_BOOTING_TIME_FGCURRENT	5*6 // 5 seconds, 6 points = 1s
#define MAX_BOOTING_TIME_FGCURRENT	1*10 // 10s

#if defined(CONFIG_POWER_EXT)
//#define OCV_BOARD_COMPESATE	32 //mV
#define OCV_BOARD_COMPESATE	72 //mV
#define R_FG_BOARD_BASE		1000
#define R_FG_BOARD_SLOPE	1000 //slope
#else
//#define OCV_BOARD_COMPESATE	0 //mV
//#define OCV_BOARD_COMPESATE	48 //mV
//#define OCV_BOARD_COMPESATE	25 //mV
#define OCV_BOARD_COMPESATE	0 //mV
#define R_FG_BOARD_BASE		1000
#define R_FG_BOARD_SLOPE	1000 //slope
//#define R_FG_BOARD_SLOPE	1057 //slope
//#define R_FG_BOARD_SLOPE	1075 //slope
#endif

#define Q_MAX_POS_50_BAT1	2799
#define Q_MAX_POS_25_BAT1	2790
#define Q_MAX_POS_0_BAT1		2628
#define Q_MAX_NEG_10_BAT1	1845

#define Q_MAX_POS_50_H_CURRENT_BAT1	2754
#define Q_MAX_POS_25_H_CURRENT_BAT1	2722
#define Q_MAX_POS_0_H_CURRENT_BAT1	  1936
#define Q_MAX_NEG_10_H_CURRENT_BAT1	627

#define Q_MAX_POS_50_BAT2	2147
#define Q_MAX_POS_25_BAT2	2167
#define Q_MAX_POS_0_BAT2		2200
#define Q_MAX_NEG_10_BAT2	2112

#define Q_MAX_POS_50_H_CURRENT_BAT2	2107
#define Q_MAX_POS_25_H_CURRENT_BAT2	2107
#define Q_MAX_POS_0_H_CURRENT_BAT2	  1929
#define Q_MAX_NEG_10_H_CURRENT_BAT2	1265

#define R_FG_VALUE 				20 // mOhm, base is 20
#define CURRENT_DETECT_R_FG	100  //10mA

#define OSR_SELECT_7			0

#define CAR_TUNE_VALUE			107 //1.07

#ifdef MTK_NCP1851_SUPPORT
#define OCV_USE_BATSNS
#define R_QFET_VALUE			15 // (10+20)/2
#endif

/////////////////////////////////////////////////////////////////////
// <DOD, Battery_Voltage> Table
/////////////////////////////////////////////////////////////////////
typedef struct _BATTERY_PROFILE_STRUC
{
    kal_int32 percentage;
    kal_int32 voltage;
} BATTERY_PROFILE_STRUC, *BATTERY_PROFILE_STRUC_P;

typedef enum
{
    T1_0C,
    T2_25C,
    T3_50C
} PROFILE_TEMPERATURE;

//BAT1 DOD0 profile
// T0 -10C
BATTERY_PROFILE_STRUC battery_profile_t0_bat1[] =
{
    {0  , 4114},
    {3  , 4093},
    {6  , 4074},
    {9  , 4054},
    {12 , 4030},
    {15 , 4009},
    {18 , 3994},
    {20 , 3980},
    {23 , 3968},
    {26 , 3956},
    {29 , 3946},
    {32 , 3933},
    {35 , 3919},
    {38 , 3900},
    {41 , 3880},
    {44 , 3865},
    {47 , 3854},
    {50 , 3846},
    {53 , 3839},
    {56 , 3832},
    {58 , 3825},
    {61 , 3816},
    {64 , 3811},
    {67 , 3806},
    {70 , 3801},
    {73 , 3797},
    {76 , 3791},
    {78 , 3788},
    {80 , 3786},
    {82 , 3785},
    {83 , 3784},
    {84 , 3782},
    {85 , 3781},
    {86 , 3781},
    {87 , 3779},
    {88 , 3780},
    {89 , 3779},
    {89 , 3778},
    {90 , 3778},
    {91 , 3778},
    {91 , 3778},
    {92 , 3777},
    {92 , 3777},
    {92 , 3776},
    {93 , 3777},
    {93 , 3775},
    {94 , 3775},
    {94 , 3775},
    {94 , 3775},
    {95 , 3775},
    {95 , 3775},
    {95 , 3774},
    {96 , 3774},
    {96 , 3774},
    {96 , 3773},
    {96 , 3772},
    {97 , 3773},
    {97 , 3771},
    {97 , 3772},
    {97 , 3771},
    {98 , 3770},
    {98 , 3770},
    {98 , 3770},
    {98 , 3771},
    {98 , 3770},
    {99 , 3769},
    {99 , 3769},
    {99 , 3770},
    {99 , 3768},
    {99 , 3769},
    {99 , 3768},
    {100, 3767},
    {100, 3768},
    {100, 3766},
    {100, 3766}
};

// T1 0C
BATTERY_PROFILE_STRUC battery_profile_t1_bat1[] =
{
    {0  , 4155},
    {2  , 4132},
    {4  , 4114},
    {6  , 4098},
    {8  , 4085},
    {10 , 4069},
    {12 , 4049},
    {14 , 4029},
    {16 , 4010},
    {18 , 3994},
    {21 , 3981},
    {23 , 3968},
    {25 , 3956},
    {27 , 3943},
    {29 , 3928},
    {31 , 3912},
    {33 , 3895},
    {35 , 3879},
    {37 , 3867},
    {39 , 3858},
    {41 , 3849},
    {43 , 3840},
    {45 , 3833},
    {47 , 3827},
    {49 , 3820},
    {51 , 3813},
    {53 , 3808},
    {55 , 3803},
    {57 , 3798},
    {60 , 3795},
    {62 , 3790},
    {64 , 3786},
    {66 , 3784},
    {68 , 3780},
    {70 , 3775},
    {72 , 3771},
    {74 , 3766},
    {76 , 3759},
    {78 , 3749},
    {80 , 3739},
    {82 , 3727},
    {84 , 3714},
    {86 , 3705},
    {88 , 3700},
    {90 , 3697},
    {92 , 3692},
    {94 , 3688},
    {95 , 3683},
    {96 , 3677},
    {96 , 3673},
    {97 , 3665},
    {97 , 3658},
    {98 , 3649},
    {98 , 3643},
    {98 , 3636},
    {98 , 3630},
    {99 , 3625},
    {99 , 3621},
    {99 , 3616},
    {99 , 3613},
    {99 , 3610},
    {99 , 3606},
    {99 , 3603},
    {99 , 3602},
    {99 , 3598},
    {100, 3596},
    {100, 3593},
    {100, 3591},
    {100, 3589},
    {100, 3587},
    {100, 3584},
    {100, 3582},
    {100, 3581},
    {100, 3579},
    {100, 3579}
};

// T2 25C
BATTERY_PROFILE_STRUC battery_profile_t2_bat1[] =
{
    {0  , 4181},
    {2  , 4161},
    {4  , 4143},
    {6  , 4126},
    {8  , 4108},
    {10 , 4093},
    {12 , 4079},
    {14 , 4063},
    {15 , 4046},
    {17 , 4028},
    {19 , 4011},
    {21 , 3997},
    {23 , 3984},
    {25 , 3971},
    {27 , 3961},
    {29 , 3949},
    {31 , 3935},
    {33 , 3920},
    {35 , 3901},
    {37 , 3884},
    {39 , 3870},
    {41 , 3859},
    {43 , 3851},
    {44 , 3843},
    {46 , 3833},
    {48 , 3827},
    {50 , 3820},
    {52 , 3814},
    {54 , 3809},
    {56 , 3803},
    {58 , 3798},
    {60 , 3793},
    {62 , 3788},
    {64 , 3783},
    {66 , 3779},
    {68 , 3775},
    {70 , 3770},
    {72 , 3766},
    {73 , 3757},
    {75 , 3751},
    {77 , 3742},
    {79 , 3732},
    {81 , 3719},
    {83 , 3704},
    {85 , 3692},
    {87 , 3690},
    {89 , 3686},
    {91 , 3684},
    {93 , 3680},
    {95 , 3663},
    {97 , 3599},
    {99 , 3506},
    {100, 3376},
    {101, 3353},
    {101, 3338},
    {101, 3330},
    {101, 3327},
    {101, 3323},
    {101, 3322},
    {101, 3321},
    {101, 3320},
    {101, 3320},
    {101, 3319},
    {101, 3320},
    {101, 3318},
    {101, 3318},
    {101, 3317},
    {101, 3316},
    {101, 3315},
    {101, 3316},
    {101, 3315},
    {101, 3314},
    {101, 3313},
    {101, 3312},
    {101, 3312}
};

// T3 50C
BATTERY_PROFILE_STRUC battery_profile_t3_bat1[] =
{
    {0  , 4183},
    {2  , 4165},
    {4  , 4146},
    {6  , 4128},
    {8  , 4112},
    {10 , 4094},
    {12 , 4078},
    {14 , 4062},
    {15 , 4048},
    {17 , 4031},
    {19 , 4017},
    {21 , 4001},
    {23 , 3989},
    {25 , 3976},
    {27 , 3964},
    {29 , 3950},
    {31 , 3938},
    {33 , 3924},
    {35 , 3907},
    {37 , 3888},
    {39 , 3874},
    {40 , 3862},
    {42 , 3853},
    {44 , 3845},
    {46 , 3837},
    {48 , 3827},
    {50 , 3822},
    {52 , 3814},
    {54 , 3808},
    {56 , 3803},
    {58 , 3796},
    {60 , 3792},
    {62 , 3788},
    {64 , 3782},
    {66 , 3775},
    {67 , 3764},
    {69 , 3755},
    {71 , 3749},
    {73 , 3743},
    {75 , 3736},
    {77 , 3728},
    {79 , 3720},
    {81 , 3708},
    {83 , 3693},
    {85 , 3679},
    {87 , 3676},
    {89 , 3673},
    {91 , 3672},
    {93 , 3669},
    {94 , 3654},
    {96 , 3600},
    {98 , 3517},
    {100, 3382},
    {101, 3314},
    {101, 3302},
    {101, 3298},
    {101, 3296},
    {101, 3295},
    {101, 3294},
    {101, 3292},
    {101, 3293},
    {101, 3292},
    {101, 3291},
    {101, 3292},
    {101, 3292},
    {101, 3291},
    {101, 3289},
    {101, 3288},
    {101, 3289},
    {101, 3287},
    {101, 3286},
    {101, 3285},
    {101, 3285},
    {101, 3284},
    {101, 3284}
};

//BAT2 DOD0 profile
// T0 -10C
BATTERY_PROFILE_STRUC battery_profile_t0_bat2[] =
{
    {0  , 4185},
    {3  , 4152},
    {5  , 4123},
    {8  , 4096},
    {10 , 4071},
    {13 , 4046},
    {15 , 4022},
    {18 , 3998},
    {20 , 3976},
    {23 , 3955},
    {26 , 3934},
    {28 , 3915},
    {31 , 3896},
    {33 , 3879},
    {36 , 3861},
    {38 , 3845},
    {41 , 3830},
    {43 , 3817},
    {46 , 3806},
    {48 , 3797},
    {51 , 3791},
    {54 , 3784},
    {56 , 3776},
    {59 , 3768},
    {61 , 3758},
    {64 , 3748},
    {66 , 3737},
    {69 , 3723},
    {71 , 3709},
    {74 , 3692},
    {77 , 3674},
    {79 , 3654},
    {82 , 3632},
    {84 , 3610},
    {87 , 3588},
    {89 , 3567},
    {91 , 3554},
    {93 , 3547},
    {94 , 3544},
    {95 , 3538},
    {96 , 3534},
    {96 , 3530},
    {97 , 3527},
    {98 , 3524},
    {98 , 3521},
    {98 , 3519},
    {99 , 3515},
    {99 , 3513},
    {100, 3510},
    {100, 3508},
    {100, 3508},
    {100, 3508},
    {100, 3508},
    {100, 3508},
    {100, 3508},
    {100, 3508},
    {100, 3508},
    {100, 3508},
    {100, 3508},
    {100, 3508},
    {100, 3508},
    {100, 3508},
    {100, 3508},
    {100, 3508},
    {100, 3508},
    {100, 3508},
    {100, 3508},
    {100, 3508},
    {100, 3508},
    {100, 3508},
    {100, 3508},
    {100, 3508},
    {100, 3508},
    {100, 3508},
    {100, 3508}
};

// T1 0C
BATTERY_PROFILE_STRUC battery_profile_t1_bat2[] =
{
    {0  , 4192},
    {2  , 4164},
    {5  , 4139},
    {7  , 4114},
    {10 , 4091},
    {12 , 4069},
    {15 , 4047},
    {17 , 4026},
    {20 , 4005},
    {22 , 3986},
    {25 , 3967},
    {27 , 3949},
    {29 , 3929},
    {32 , 3908},
    {34 , 3888},
    {37 , 3869},
    {39 , 3851},
    {42 , 3836},
    {44 , 3824},
    {47 , 3813},
    {49 , 3803},
    {51 , 3795},
    {54 , 3788},
    {56 , 3784},
    {59 , 3780},
    {61 , 3777},
    {64 , 3773},
    {66 , 3768},
    {69 , 3762},
    {71 , 3755},
    {74 , 3746},
    {76 , 3734},
    {78 , 3718},
    {81 , 3697},
    {83 , 3673},
    {86 , 3645},
    {88 , 3617},
    {91 , 3589},
    {93 , 3561},
    {96 , 3528},
    {98 , 3465},
    {99 , 3428},
    {100, 3403},
    {100, 3384},
    {101, 3367},
    {101, 3353},
    {101, 3341},
    {102, 3331},
    {102, 3323},
    {102, 3315},
    {102, 3315},
    {102, 3315},
    {102, 3315},
    {102, 3315},
    {102, 3315},
    {102, 3315},
    {102, 3315},
    {102, 3315},
    {102, 3315},
    {102, 3315},
    {102, 3315},
    {102, 3315},
    {102, 3315},
    {102, 3315},
    {102, 3315},
    {102, 3315},
    {102, 3315},
    {102, 3315},
    {102, 3315},
    {102, 3315},
    {102, 3315},
    {102, 3315},
    {102, 3315},
    {102, 3315},
    {102, 3315}
};

// T2 25C
BATTERY_PROFILE_STRUC battery_profile_t2_bat2[] =
{
    {0  , 4190},
    {2  , 4167},
    {4  , 4144},
    {7  , 4123},
    {9  , 4103},
    {11 , 4084},
    {13 , 4064},
    {16 , 4045},
    {18 , 4027},
    {20 , 4010},
    {22 , 3993},
    {24 , 3977},
    {27 , 3961},
    {29 , 3948},
    {31 , 3931},
    {33 , 3915},
    {35 , 3892},
    {38 , 3870},
    {40 , 3855},
    {42 , 3843},
    {44 , 3833},
    {47 , 3823},
    {49 , 3815},
    {51 , 3807},
    {53 , 3800},
    {55 , 3796},
    {58 , 3791},
    {60 , 3786},
    {62 , 3781},
    {64 , 3778},
    {66 , 3775},
    {69 , 3772},
    {71 , 3768},
    {73 , 3761},
    {75 , 3752},
    {78 , 3745},
    {80 , 3735},
    {82 , 3720},
    {84 , 3701},
    {86 , 3688},
    {89 , 3681},
    {91 , 3672},
    {93 , 3656},
    {95 , 3625},
    {97 , 3540},
    {100, 3421},
    {101, 3345},
    {101, 3320},
    {101, 3307},
    {102, 3302},
    {102, 3298},
    {102, 3294},
    {102, 3293},
    {102, 3292},
    {102, 3292},
    {102, 3289},
    {102, 3289},
    {102, 3288},
    {102, 3287},
    {102, 3285},
    {102, 3284},
    {102, 3284},
    {102, 3283},
    {102, 3283},
    {102, 3282},
    {102, 3282},
    {102, 3281},
    {102, 3280},
    {102, 3279},
    {102, 3279},
    {102, 3279},
    {102, 3279},
    {102, 3279},
    {102, 3279},
    {102, 3279}
};

// T3 50C
BATTERY_PROFILE_STRUC battery_profile_t3_bat2[] =
{
    {0  , 4180},
    {2  , 4159},
    {4  , 4137},
    {7  , 4116},
    {9  , 4097},
    {11 , 4075},
    {13 , 4056},
    {16 , 4037},
    {18 , 4019},
    {20 , 4003},
    {22 , 3985},
    {25 , 3972},
    {27 , 3956},
    {29 , 3942},
    {31 , 3926},
    {34 , 3907},
    {36 , 3884},
    {38 , 3865},
    {40 , 3851},
    {42 , 3840},
    {45 , 3831},
    {47 , 3822},
    {49 , 3813},
    {51 , 3806},
    {54 , 3799},
    {56 , 3793},
    {58 , 3788},
    {60 , 3782},
    {63 , 3778},
    {65 , 3773},
    {67 , 3762},
    {69 , 3755},
    {72 , 3750},
    {74 , 3742},
    {76 , 3732},
    {78 , 3725},
    {80 , 3712},
    {83 , 3699},
    {85 , 3678},
    {87 , 3674},
    {89 , 3672},
    {92 , 3663},
    {94 , 3643},
    {96 , 3589},
    {98 , 3499},
    {101, 3366},
    {101, 3311},
    {102, 3288},
    {102, 3279},
    {102, 3274},
    {102, 3272},
    {102, 3270},
    {102, 3269},
    {102, 3267},
    {102, 3267},
    {102, 3269},
    {102, 3266},
    {102, 3266},
    {102, 3265},
    {102, 3264},
    {102, 3265},
    {102, 3266},
    {102, 3265},
    {102, 3266},
    {102, 3264},
    {102, 3263},
    {102, 3264},
    {102, 3263},
    {102, 3263},
    {102, 3263},
    {102, 3263},
    {102, 3263},
    {102, 3263},
    {102, 3263},
    {102, 3263}
};

// battery profile for actual temperature. The size should be the same as T1, T2 and T3
BATTERY_PROFILE_STRUC battery_profile_temperature[] =
{
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0}
};

/////////////////////////////////////////////////////////////////////
// <Rbat, Battery_Voltage> Table
/////////////////////////////////////////////////////////////////////
typedef struct _R_PROFILE_STRUC
{
    kal_int32 resistance; // Ohm
    kal_int32 voltage;
} R_PROFILE_STRUC, *R_PROFILE_STRUC_P;

//BAT1 R profile
// T0 -10C
R_PROFILE_STRUC r_profile_t0_bat1[] =
{
    {697, 4114},
    {697, 4093},
    {725, 4074},
    {752, 4054},
    {767, 4030},
    {787, 4009},
    {805, 3994},
    {815, 3980},
    {828, 3968},
    {847, 3956},
    {863, 3946},
    {868, 3933},
    {877, 3919},
    {882, 3900},
    {880, 3880},
    {882, 3865},
    {890, 3854},
    {898, 3846},
    {907, 3839},
    {918, 3832},
    {930, 3825},
    {930, 3816},
    {940, 3811},
    {948, 3806},
    {957, 3801},
    {972, 3797},
    {980, 3791},
    {982, 3788},
    {977, 3786},
    {977, 3785},
    {975, 3784},
    {970, 3782},
    {968, 3781},
    {972, 3781},
    {965, 3779},
    {968, 3780},
    {967, 3779},
    {963, 3778},
    {963, 3778},
    {965, 3778},
    {965, 3778},
    {963, 3777},
    {965, 3777},
    {963, 3776},
    {962, 3777},
    {960, 3775},
    {960, 3775},
    {962, 3775},
    {960, 3775},
    {960, 3775},
    {962, 3775},
    {960, 3774},
    {960, 3774},
    {960, 3774},
    {957, 3773},
    {958, 3772},
    {957, 3773},
    {955, 3771},
    {955, 3772},
    {953, 3771},
    {952, 3770},
    {953, 3770},
    {952, 3770},
    {955, 3771},
    {952, 3770},
    {952, 3769},
    {953, 3769},
    {950, 3770},
    {947, 3768},
    {948, 3769},
    {950, 3768},
    {948, 3767},
    {948, 3768},
    {943, 3766},
    {945, 3766}
};

// T1 0C
R_PROFILE_STRUC r_profile_t1_bat1[] =
{
    {348, 4155},
    {348, 4132},
    {358, 4114},
    {367, 4098},
    {378, 4085},
    {387, 4069},
    {392, 4049},
    {403, 4029},
    {408, 4010},
    {417, 3994},
    {425, 3981},
    {433, 3968},
    {442, 3956},
    {447, 3943},
    {448, 3928},
    {448, 3912},
    {445, 3895},
    {442, 3879},
    {445, 3867},
    {453, 3858},
    {458, 3849},
    {462, 3840},
    {473, 3833},
    {480, 3827},
    {483, 3820},
    {490, 3813},
    {498, 3808},
    {505, 3803},
    {512, 3798},
    {520, 3795},
    {522, 3790},
    {535, 3786},
    {550, 3784},
    {563, 3780},
    {578, 3775},
    {593, 3771},
    {613, 3766},
    {623, 3759},
    {635, 3749},
    {650, 3739},
    {665, 3727},
    {678, 3714},
    {695, 3705},
    {715, 3700},
    {747, 3697},
    {785, 3692},
    {815, 3688},
    {807, 3683},
    {797, 3677},
    {790, 3673},
    {777, 3665},
    {763, 3658},
    {750, 3649},
    {740, 3643},
    {727, 3636},
    {720, 3630},
    {708, 3625},
    {707, 3621},
    {697, 3616},
    {690, 3613},
    {687, 3610},
    {682, 3606},
    {673, 3603},
    {672, 3602},
    {667, 3598},
    {665, 3596},
    {658, 3593},
    {657, 3591},
    {650, 3589},
    {650, 3587},
    {643, 3584},
    {643, 3582},
    {643, 3581},
    {637, 3579},
    {638, 3579}
};

// T2 25C
R_PROFILE_STRUC r_profile_t2_bat1[] =
{
    {170, 4181},
    {170, 4161},
    {172, 4143},
    {172, 4126},
    {172, 4108},
    {175, 4093},
    {178, 4079},
    {178, 4063},
    {178, 4046},
    {180, 4028},
    {183, 4011},
    {183, 3997},
    {188, 3984},
    {192, 3971},
    {198, 3961},
    {202, 3949},
    {207, 3935},
    {202, 3920},
    {193, 3901},
    {183, 3884},
    {180, 3870},
    {183, 3859},
    {185, 3851},
    {185, 3843},
    {182, 3833},
    {187, 3827},
    {190, 3820},
    {190, 3814},
    {195, 3809},
    {192, 3803},
    {197, 3798},
    {197, 3793},
    {198, 3788},
    {197, 3783},
    {197, 3779},
    {200, 3775},
    {202, 3770},
    {207, 3766},
    {202, 3757},
    {205, 3751},
    {205, 3742},
    {208, 3732},
    {208, 3719},
    {213, 3704},
    {208, 3692},
    {213, 3690},
    {220, 3686},
    {233, 3684},
    {245, 3680},
    {255, 3663},
    {255, 3599},
    {272, 3506},
    {295, 3376},
    {258, 3353},
    {232, 3338},
    {218, 3330},
    {212, 3327},
    {207, 3323},
    {203, 3322},
    {203, 3321},
    {202, 3320},
    {205, 3320},
    {203, 3319},
    {202, 3320},
    {203, 3318},
    {205, 3318},
    {200, 3317},
    {202, 3316},
    {200, 3315},
    {202, 3316},
    {207, 3315},
    {202, 3314},
    {205, 3313},
    {202, 3312},
    {208, 3312}
};

// T3 50C
R_PROFILE_STRUC r_profile_t3_bat1[] =
{
    {157, 4183},
    {157, 4165},
    {155, 4146},
    {155, 4128},
    {160, 4112},
    {157, 4094},
    {157, 4078},
    {157, 4062},
    {160, 4048},
    {162, 4031},
    {162, 4017},
    {162, 4001},
    {163, 3989},
    {165, 3976},
    {172, 3964},
    {172, 3950},
    {175, 3938},
    {175, 3924},
    {172, 3907},
    {165, 3888},
    {162, 3874},
    {160, 3862},
    {158, 3853},
    {160, 3845},
    {162, 3837},
    {158, 3827},
    {162, 3822},
    {162, 3814},
    {163, 3808},
    {167, 3803},
    {165, 3796},
    {172, 3792},
    {172, 3788},
    {172, 3782},
    {172, 3775},
    {163, 3764},
    {162, 3755},
    {163, 3749},
    {165, 3743},
    {167, 3736},
    {167, 3728},
    {167, 3720},
    {165, 3708},
    {165, 3693},
    {163, 3679},
    {165, 3676},
    {165, 3673},
    {172, 3672},
    {177, 3669},
    {177, 3654},
    {182, 3600},
    {188, 3517},
    {197, 3382},
    {190, 3314},
    {170, 3302},
    {165, 3298},
    {160, 3296},
    {158, 3295},
    {158, 3294},
    {155, 3292},
    {158, 3293},
    {155, 3292},
    {152, 3291},
    {155, 3292},
    {157, 3292},
    {153, 3291},
    {153, 3289},
    {153, 3288},
    {155, 3289},
    {153, 3287},
    {152, 3286},
    {153, 3285},
    {153, 3285},
    {155, 3284},
    {155, 3284}
};

//BAT2 R profile
// T0 -10C
R_PROFILE_STRUC r_profile_t0_bat2[] =
{
    {565, 4185},
    {565, 4152},
    {567, 4123},
    {570, 4096},
    {572, 4071},
    {573, 4046},
    {572, 4022},
    {570, 3998},
    {568, 3976},
    {568, 3955},
    {565, 3934},
    {565, 3915},
    {563, 3896},
    {562, 3879},
    {560, 3861},
    {558, 3845},
    {560, 3830},
    {560, 3817},
    {563, 3806},
    {568, 3797},
    {578, 3791},
    {585, 3784},
    {593, 3776},
    {602, 3768},
    {610, 3758},
    {617, 3748},
    {625, 3737},
    {628, 3723},
    {633, 3709},
    {638, 3692},
    {648, 3674},
    {658, 3654},
    {677, 3632},
    {707, 3610},
    {760, 3588},
    {852, 3567},
    {925, 3554},
    {915, 3547},
    {908, 3544},
    {900, 3538},
    {892, 3534},
    {887, 3530},
    {880, 3527},
    {875, 3524},
    {872, 3521},
    {868, 3519},
    {863, 3515},
    {857, 3513},
    {853, 3510},
    {850, 3508},
    {850, 3508},
    {850, 3508},
    {850, 3508},
    {850, 3508},
    {850, 3508},
    {850, 3508},
    {850, 3508},
    {850, 3508},
    {850, 3508},
    {850, 3508},
    {850, 3508},
    {850, 3508},
    {850, 3508},
    {850, 3508},
    {850, 3508},
    {850, 3508},
    {850, 3508},
    {850, 3508},
    {850, 3508},
    {850, 3508},
    {850, 3508},
    {850, 3508},
    {850, 3508},
    {850, 3508},
    {850, 3508}
};

// T1 0C
R_PROFILE_STRUC r_profile_t1_bat2[] =
{
    {315, 4192},
    {315, 4164},
    {320, 4139},
    {323, 4114},
    {327, 4091},
    {330, 4069},
    {332, 4047},
    {333, 4026},
    {335, 4005},
    {338, 3986},
    {338, 3967},
    {338, 3949},
    {335, 3929},
    {327, 3908},
    {322, 3888},
    {317, 3869},
    {312, 3851},
    {308, 3836},
    {310, 3824},
    {312, 3813},
    {315, 3803},
    {320, 3795},
    {323, 3788},
    {332, 3784},
    {338, 3780},
    {347, 3777},
    {357, 3773},
    {365, 3768},
    {372, 3762},
    {378, 3755},
    {383, 3746},
    {387, 3734},
    {388, 3718},
    {383, 3697},
    {380, 3673},
    {372, 3645},
    {372, 3617},
    {387, 3589},
    {427, 3561},
    {513, 3528},
    {725, 3465},
    {715, 3428},
    {673, 3403},
    {642, 3384},
    {617, 3367},
    {597, 3353},
    {572, 3341},
    {553, 3331},
    {540, 3323},
    {528, 3315},
    {528, 3315},
    {528, 3315},
    {528, 3315},
    {528, 3315},
    {528, 3315},
    {528, 3315},
    {528, 3315},
    {528, 3315},
    {528, 3315},
    {528, 3315},
    {528, 3315},
    {528, 3315},
    {528, 3315},
    {528, 3315},
    {528, 3315},
    {528, 3315},
    {528, 3315},
    {528, 3315},
    {528, 3315},
    {528, 3315},
    {528, 3315},
    {528, 3315},
    {528, 3315},
    {528, 3315},
    {528, 3315}
};

// T2 25C
R_PROFILE_STRUC r_profile_t2_bat2[] =
{
    {158, 4190},
    {158, 4167},
    {155, 4144},
    {158, 4123},
    {162, 4103},
    {167, 4084},
    {163, 4064},
    {168, 4045},
    {172, 4027},
    {175, 4010},
    {182, 3993},
    {183, 3977},
    {190, 3961},
    {198, 3948},
    {197, 3931},
    {197, 3915},
    {185, 3892},
    {173, 3870},
    {167, 3855},
    {165, 3843},
    {165, 3833},
    {162, 3823},
    {163, 3815},
    {165, 3807},
    {163, 3800},
    {167, 3796},
    {168, 3791},
    {173, 3786},
    {173, 3781},
    {172, 3778},
    {173, 3775},
    {173, 3772},
    {175, 3768},
    {170, 3761},
    {170, 3752},
    {172, 3745},
    {178, 3735},
    {178, 3720},
    {178, 3701},
    {183, 3688},
    {188, 3681},
    {203, 3672},
    {218, 3656},
    {240, 3625},
    {248, 3540},
    {255, 3421},
    {243, 3345},
    {202, 3320},
    {178, 3307},
    {170, 3302},
    {163, 3298},
    {158, 3294},
    {157, 3293},
    {155, 3292},
    {157, 3292},
    {152, 3289},
    {150, 3289},
    {150, 3288},
    {147, 3287},
    {145, 3285},
    {140, 3284},
    {140, 3284},
    {140, 3283},
    {142, 3283},
    {138, 3282},
    {138, 3282},
    {138, 3281},
    {137, 3280},
    {135, 3279},
    {138, 3279},
    {138, 3279},
    {138, 3279},
    {138, 3279},
    {138, 3279},
    {138, 3279}
};

// T3 50C
R_PROFILE_STRUC r_profile_t3_bat2[] =
{
    {118, 4180},
    {118, 4159},
    {115, 4137},
    {118, 4116},
    {122, 4097},
    {117, 4075},
    {120, 4056},
    {118, 4037},
    {122, 4019},
    {125, 4003},
    {125, 3985},
    {133, 3972},
    {133, 3956},
    {140, 3942},
    {143, 3926},
    {143, 3907},
    {132, 3884},
    {122, 3865},
    {118, 3851},
    {120, 3840},
    {122, 3831},
    {122, 3822},
    {122, 3813},
    {122, 3806},
    {122, 3799},
    {127, 3793},
    {130, 3788},
    {128, 3782},
    {130, 3778},
    {130, 3773},
    {123, 3762},
    {123, 3755},
    {125, 3750},
    {123, 3742},
    {122, 3732},
    {123, 3725},
    {125, 3712},
    {125, 3699},
    {122, 3678},
    {122, 3674},
    {133, 3672},
    {135, 3663},
    {142, 3643},
    {168, 3589},
    {178, 3499},
    {188, 3366},
    {185, 3311},
    {148, 3288},
    {133, 3279},
    {123, 3274},
    {122, 3272},
    {120, 3270},
    {118, 3269},
    {115, 3267},
    {113, 3267},
    {115, 3269},
    {112, 3266},
    {113, 3266},
    {110, 3265},
    {110, 3264},
    {112, 3265},
    {113, 3266},
    {110, 3265},
    {110, 3266},
    {110, 3264},
    {108, 3263},
    {108, 3264},
    {108, 3263},
    {108, 3263},
    {108, 3263},
    {108, 3263},
    {108, 3263},
    {108, 3263},
    {108, 3263},
    {108, 3263}
};

// r-table profile for actual temperature. The size should be the same as T1, T2 and T3
R_PROFILE_STRUC r_profile_temperature[] =
{
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0}
};


int fgauge_get_saddles(void);
BATTERY_PROFILE_STRUC_P fgauge_get_profile(kal_uint32 temperature);

int fgauge_get_saddles_r_table(void);
R_PROFILE_STRUC_P fgauge_get_profile_r_table(kal_uint32 temperature);
